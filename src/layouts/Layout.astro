---
import "@/styles/global.css";
import Footer from "@/components/Footer.astro"; // Import the new Footer
const base = import.meta.env.BASE_URL;

interface Props {
  title: string;
  description?: string;
  hideFooter?: boolean;
}

const { title, description: pageDescription, hideFooter = false } = Astro.props;
const siteName = "The Latina Sweat Project";
const description =
  pageDescription ||
  "Free community yoga, fitness classes, and wellness events in Pilsen, Chicago. The Latina Sweat Project empowers through movement, culture, and community on the Southwest Side.";
const socialImage = "logo2.png";
const socialImageAlt = "The Latina Sweat Project Logo";
const socialImageUrl = new URL(base + socialImage, Astro.url);
const canonicalURL = new URL(
  Astro.url.pathname,
  "https://latinasweatproject.com",
);

// Google Analytics 4 Measurement ID â€” replace with your real ID
const GA_MEASUREMENT_ID = "G-XXXXXXXXXX";
---

<!doctype html>
<html lang="en" class="overflow-x-hidden">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.ico`} />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL.href} />

    <!-- Local SEO: Geo & Keywords -->
    <meta name="geo.region" content="US-IL" />
    <meta name="geo.placename" content="Pilsen, Chicago" />
    <meta name="geo.position" content="41.8584;-87.6510" />
    <meta name="ICBM" content="41.8584, -87.6510" />
    <meta
      name="keywords"
      content="yoga Pilsen Chicago, free yoga classes Chicago, Latina wellness, community yoga Southwest Side, nonprofit yoga studio Pilsen, fitness classes Pilsen, yoga teacher training Chicago, BIPOC yoga Chicago, wellness events Pilsen, Latina Sweat Project"
    />
    <meta name="robots" content="index, follow" />

    <!-- Google Analytics 4 -->
    {
      GA_MEASUREMENT_ID !== "G-XXXXXXXXXX" && (
        <script
          async
          src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}
        />
      )
    }
    <script define:vars={{ GA_MEASUREMENT_ID }}>
      if (GA_MEASUREMENT_ID !== "G-XXXXXXXXXX") {
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", GA_MEASUREMENT_ID);
      }
    </script>

    <!-- Open Graph / Facebook -->
    <meta property="og:site_name" content={siteName} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={socialImageUrl.href} />
    <meta property="og:image:secure_url" content={socialImageUrl.href} />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="512" />
    {/* Note: Update with actual width of logo2.png */}
    <meta property="og:image:height" content="512" />
    {/* Note: Update with actual height of logo2.png */}
    <meta property="og:image:alt" content={socialImageAlt} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={socialImageUrl.href} />
    <meta name="twitter:image:alt" content={socialImageAlt} />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- XplorGrowth Signup Form Assets -->
    <script
      type="application/javascript"
      src="https://forms.prd.xplorcs.com/assets/embed/xpl-form-api.js"></script>
    <link
      href="https://forms.prd.xplorcs.com/assets/embed/embed.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body class="bg-white text-off-black overflow-x-hidden">
    <slot />
    <script>
      (function () {
        // Set tenant name here
        var TENANT_NAME = "latinasweatproject";

        var d = document;
        var sA = ["polyfills", "js"];

        for (var i = 0; i < sA.length; i++) {
          var s = d.createElement("script");
          s.src = "https://" + TENANT_NAME + ".marianaiframes.com/" + sA[i];
          s.setAttribute("data-timestamp", +new Date());
          (d.head || d.body).appendChild(s);
        }
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://marianatek.com/?ref_noscript" rel="nofollow">
        Web Integrations by Mariana Tek.
      </a>
    </noscript>

    <!-- Page Password protection script (Before go live remove this script unless you need password on mariana tek pages) 

<script>
  (function () {
    const protectedPages = ["/latinasweatproject/account", "/latinasweatproject/schedule", "/latinasweatproject/register", "/latinasweatproject/pricing"];
    const currentPath = window.location.pathname;

    if (protectedPages.includes(currentPath)) {
      const correctPassword = "ipstudio";
      const enteredPassword = sessionStorage.getItem("pageAccess");

      if (enteredPassword !== correctPassword) {
        const userInput = prompt("This page is protected. Please enter the password:");
        if (userInput !== correctPassword) {
          alert("Incorrect password. Redirecting to homepage.");
          window.location.href = `${base}`;
        } else {
          sessionStorage.setItem("pageAccess", correctPassword);
        }
      } 
    }
  })();
</script> -->

    <!-- Page Password protection script (Before go live remove this script unless you need password on mariana tek pages) -->

    <noscript>
      Please enable JavaScript to view the
      <a href="https://marianatek.com/?ref_noscript" rel="nofollow">
        Web Integrations by Mariana Tek.
      </a>
    </noscript>

    <!-- Page Password protection script (Before go live remove this script unless you need password on mariana tek pages) -->

    {!hideFooter && <Footer />}

    <!-- Local Business JSON-LD Structured Data -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": ["SportsActivityLocation", "NonprofitOrganization"],
        name: "The Latina Sweat Project",
        alternateName: "LSP",
        description:
          "Free community yoga, fitness classes, and wellness events empowering Pilsen and Chicago's Southwest Side through movement, culture, and community.",
        url: "https://latinasweatproject.com",
        logo: "https://latinasweatproject.com/logo2.png",
        image: "https://latinasweatproject.com/images/studio.png",
        telephone: "",
        address: {
          "@type": "PostalAddress",
          streetAddress: "16th and Morgan",
          addressLocality: "Chicago",
          addressRegion: "IL",
          postalCode: "60608",
          addressCountry: "US",
        },
        geo: {
          "@type": "GeoCoordinates",
          latitude: 41.8584,
          longitude: -87.651,
        },
        areaServed: [
          { "@type": "Place", name: "Pilsen, Chicago, IL" },
          { "@type": "Place", name: "Southwest Side, Chicago, IL" },
          { "@type": "Place", name: "Chicago, IL" },
        ],
        sameAs: [
          "https://www.instagram.com/latinasweatproject/",
          "https://www.tiktok.com/@latinasweatproject",
        ],
        priceRange: "Free - $",
        openingHoursSpecification: {
          "@type": "OpeningHoursSpecification",
          dayOfWeek: [
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday",
            "Sunday",
          ],
          opens: "06:00",
          closes: "21:00",
        },
        hasOfferCatalog: {
          "@type": "OfferCatalog",
          name: "Yoga & Fitness Classes",
          itemListElement: [
            {
              "@type": "Offer",
              itemOffered: {
                "@type": "Service",
                name: "Community Yoga Classes",
              },
            },
            {
              "@type": "Offer",
              itemOffered: {
                "@type": "Service",
                name: "200-Hour Yoga Teacher Training",
              },
            },
            {
              "@type": "Offer",
              itemOffered: {
                "@type": "Service",
                name: "Bootcamp & Fitness Classes",
              },
            },
          ],
        },
      })}
    />
  </body>
</html>
