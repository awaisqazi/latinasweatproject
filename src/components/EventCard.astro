---
const base = import.meta.env.BASE_URL;

interface Props {
  href: string;
  imageSrc: string;
  date: string;
  title: string;
  description: string;
  target?: string; // Optional prop for opening in a new tab
}

const { href, imageSrc, date, title, description, target } = Astro.props;

const isExternal = href.startsWith('http');
const finalHref = isExternal ? href : `${base}${href.startsWith('/') ? href.substring(1) : href}`;
const finalTarget = isExternal || target === '_blank' ? '_blank' : undefined;
const finalRel = finalTarget === '_blank' ? 'noopener noreferrer' : undefined;
---
<div class="group flex h-full flex-col overflow-hidden rounded-lg bg-white shadow-lg transition-shadow duration-300 hover:shadow-xl">
  <a href={finalHref} target={finalTarget} rel={finalRel} class="block overflow-hidden">
    <img alt={title} class="h-56 w-full object-cover transition-transform duration-300 group-hover:scale-105" src={imageSrc} />
  </a>
  <div class="flex flex-1 flex-col p-6">
    <div>
      <p class="font-sans text-sm font-medium text-vibrant-pink">{date}</p>
      <h3 class="mt-2 font-sans text-xl font-bold text-off-black">{title}</h3>
      <p class="mt-2 font-body text-base text-medium-gray">{description}</p>
    </div>
    <a href={finalHref} target={finalTarget} rel={finalRel} class="mt-4 inline-block self-start font-sans font-semibold text-vibrant-pink transition hover:text-accent-gold">Learn More â†’</a>
  </div>
</div>