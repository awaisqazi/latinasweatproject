---
interface Props {
    name: string;
    role: string;
    email?: string;
    imageSrc?: string;
    variant?: "dark" | "light";
}
const { name, role, email, imageSrc, variant = "dark" } = Astro.props;

// Generate initials from name
const initials = name
    .split(" ")
    .map((word) => word[0])
    .join("")
    .toUpperCase()
    .slice(0, 2);

// Generate a consistent color based on name
const colors = [
    "bg-vibrant-pink",
    "bg-accent-gold",
    "bg-rose-400",
    "bg-amber-500",
    "bg-teal-500",
    "bg-indigo-400",
    "bg-emerald-500",
    "bg-fuchsia-500",
];
const colorIndex =
    name.split("").reduce((acc, char) => acc + char.charCodeAt(0), 0) %
    colors.length;
const bgColor = colors[colorIndex];

// Styling based on variant
const cardClasses =
    variant === "light"
        ? "bg-off-black/10 border-off-black/10 hover:bg-off-black/20"
        : "bg-white/10 border-white/10 hover:bg-white/20";
const nameClasses = variant === "light" ? "text-off-black" : "text-white";
const emailClasses =
    variant === "light"
        ? "text-medium-gray hover:text-vibrant-pink"
        : "text-white/70 hover:text-accent-gold";
const iconBgClasses =
    variant === "light"
        ? "bg-off-black/10 hover:bg-vibrant-pink"
        : "bg-white/10 hover:bg-vibrant-pink";
const iconClasses =
    variant === "light"
        ? "text-off-black group-hover:text-white"
        : "text-white";
---

<div
    class={`board-member-card flex items-center gap-4 p-4 rounded-xl backdrop-blur-sm border transition-all duration-300 hover:scale-[1.02] ${cardClasses}`}
>
    {/* Photo or Initials Avatar */}
    <div class="flex-shrink-0">
        {
            imageSrc ? (
                <img
                    src={imageSrc}
                    alt={`Photo of ${name}`}
                    class="w-16 h-16 rounded-full object-cover shadow-lg border-2 border-white/20"
                />
            ) : (
                <div
                    class={`w-16 h-16 rounded-full ${bgColor} flex items-center justify-center shadow-lg border-2 border-white/20`}
                >
                    <span class="text-xl font-bold text-white">{initials}</span>
                </div>
            )
        }
    </div>

    {/* Info */}
    <div class="flex-1 min-w-0">
        <h4 class={`font-sans text-lg font-bold truncate ${nameClasses}`}>
            {name}
        </h4>
        <p class="font-sans text-sm font-semibold text-vibrant-pink">{role}</p>
        {
            email && (
                <a
                    href={`mailto:${email}`}
                    class={`text-sm transition-colors truncate block ${emailClasses}`}
                >
                    {email}
                </a>
            )
        }
    </div>

    {/* Email Icon */}
    {
        email && (
            <a
                href={`mailto:${email}`}
                class={`group flex-shrink-0 p-2 rounded-full transition-colors ${iconBgClasses}`}
                title={`Email ${name}`}
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class={`h-5 w-5 ${iconClasses}`}
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                    />
                </svg>
            </a>
        )
    }
</div>
